<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <textarea name="" id="" cols="30" rows="10" class="input">...........................#.......#.....................#................#.......................................#.............#...........
        ..................................................#...........................................#.......................................#.....
        ........#....................................#....................................#.......................#.................................
        ........................................................................................................................#...................
        #...................#.......................................#...............................................................................
        ...............#.......................................................................#...........#...........#............#...............
        ........................................................#...........................................................................#.......
        ..............................................#.....................#...................................#...................................
        .............................#......#.....................................#.................................................................
        .......................#...........................#............................................#.................#.........................
        .....#.....................................................................................................................................#
        ...........#......#...............................................#..............................................................#..........
        .......................................................................................#...................#................................
        ..............................#........................#....................................................................#...............
        .................................................#..........#......................................#........................................
        ........#................................#...................................................#..........#.....#......#......................
        .........................#.........................................................................................................#........
        ............#.................................................................#.........#...................................................
        ....................#.......................................................................................................................
        ............................................#.............#.................................................................................
        ..............................#.....#...........................................................#........................................#..
        #.........#........................................#............#................................................................#..........
        .........................................................................................................#..................................
        ..................#.....................................#..............................#.............................#.......#..............
        ...........................#..............................................#.................................................................
        ...........................................................................................#......#.........................................
        .......................#.......#..................#..........#....................................................................#......#..
        .....#.............................................................#............................................#...........................
        ....................................#............................................#......................................#...................
        .....................................................................................................................................#......
        ..............#.............................#.......#....................................#..................................................
        .........#......................................................#.................................................#...........#.............
        ............................................................................................................................................
        .#.....................................................................#..........#....................#....................................
        ..................................#....................................................................................................#....
        ...........#.........#............................#......#........................................#.........................................
        ................................................................................................................................#...........
        ..............................................................................................#.............................................
        ......................................#..............#.......................................................#...........#..................
        ....#............#.........................................#................................................................................
        ............#..............#.............................................................#..................................................
        ...............................................#...................................................#..........................#............#
        ..................................#.........................................................................................................
        ........................................................................#...........#...............................#.....#.................
        #.........#..............#..................................................................................................................
        .......................................................................................................................................#....
        ................#..........................................#................#................#.................#..................#.........
        ...................................................................#........................................................................
        ................................................#....................................................#......................................
        .....................................................#..........................................#...........................................
        ..........................#.................................................................................................................
        .....#.....#.....................................................................#.......#..............................#...................
        .....................#........................#...............................................................#................#............
        ................................#........#............................................................#.....................................
        .................................................................................................#................#.........................
        ..................................................................#.................................................................#.......
        ............................................................................................................................................
        ................................................#.....#.................#................#....................................#.............
        ......................#.....................................................................................#........#..................#...
        ..........#........................#................................................#.......................................................
        ....#.............#...................................................................................#...........................#.........
        .........................................#..................................................#.....................#.........................
        ............................................................................................................................................
        ..........................#..................#..........................#.................................................#.................
        .......................................................................................#......................#.............................
        ................................#......#.....................#................................#......................#..................#...
        ............................................................................................................................................
        ........#.........#.................................................................#.......................................#......#........
        ..........................................#........#........................................................................................
        ............................................................................................................................................
        ...............................................................................................#.......................#....................
        ............................#............................................................................#.................................#
        ............................................................................................................................................
        ......#...........#...................................#........#........#...................................................................
        ....................................................................................#.........................................#.............
        .......................................#.........#......................................................................#...................
        ............................................................................................................................................
        ..............................#..................................................................................#..........................
        .......................#......................................................#................#............................................
        ........#..........................................................#..................#................#...........................#........
        .............#.....#................#.......................................................................................................
        .........................................#...............................#.....................................#............................
        .#...........................................................#...................#..................#.......................................
        ...........................#.................#............................................................................#.................
        .......................................................#..................................................#.........#.....................#.
        ......................................................................................#........#............................................
        ......#.........#.................#............................#................................................................#...........
        ..........................................................................#.................................................................
        ...........#.........#.........................................................................................#............................
        ...........................................#..............#.................................................................#...............
        .....................................................#.............#...................................................................#....
        ....#.........#.................#................................................................................................#..........
        .......................#.......................................................#..................#........#............#...................
        ......................................#..................................#...................#..............................................
        .......#.....................................#......................................................................#.......................
        ..#..........................#...........................#..........................#.......................................................
        ...........#.............................................................................#......................#......................#....
        ...............................................................#.........................................#..................#...............
        .................#......................#........#...............................#..........................................................
        ......................#.......................................................................#......#..............................#.......
        ............................#......#......................#.................................................................................
        ...........................................#.............................#..........................................#.....#.................
        ...........#......................................................................................#.....................................#...
        .......................................................#..........#....................................#.......#.................#..........
        ...............................#........................................................#...................................................
        ..#.....#.............................#................................#....................................................................
        ..................................................#...........................#.............................#...............................
        .............................................................................................#.....#........................................
        ...............#........................................#.............................................................#.....................
        #....................#...........#..........................................................................................................
        ............................#..............#..............................#.......................................................#.........
        .....................................................................................#......................................................
        .................#...........................................................................................#..............................
        .........#..............#............................................................................................#...................#..
        ....................................#................#..............................................#.......................................
        ...............................#.........#.................#...................#.........................#..................#...............
        #.............................................#........................................#....................................................
        ......................................................................#..........................................#..........................
        .............#...............................................................................#........#...............................#.....
        ...#............................................................#............................................#..........#..................#
        ...................................................#........................................................................................
        ..........................................#..............................#..................................................#...............
        .............................................................#....................#.....................................................#...
        .....................#..............#..................#................................................#...................................
        .......#.......................#........................................................#.......#..............#.................#..........
        ..........................................................................................................................#.................
        ...#.......................................#....................#...................#.......................................................
        ..................#.........................................................................................................................
        ...........................#...........#...................................................................#......#.........................
        ................................#.............#....................#........................................................................
        .........................................................................................#.......#..........................................
        .......#.....................................................#................................................................#...........#.
        ..................................................#.......................#.................................................................
        .............#...................................................................................................#...................#......
        ............................#.........#................#.............................#................#.....................................
        ......................#.......................................................................#...........................#.................
        ............................................................................................................................................
        .............................................................................................................#.......#............#.........
        .......#...........#.....#.....#.............................#..............................................................................
        .............#...............................#..........#..........................................#......................................#.</textarea>
    <button class="button">Go</button>
    <div class="final"></div>
</body>
<script>
    let input = document.querySelector(".input")
    let button = document.querySelector(".button")
    let final = document.querySelector(".final")

    function refresh() {
        let lines = input.value.split("\n").map(l => {return l.trim().split("")})
        let columns = []
        let galaxies = []
        let combos = []
        let total = 0
        
        for (let i = lines.length - 1; i >= 0; i--) { //expand rows
            let row = lines[i];
            if (!row.includes("#")) {
                lines.splice(i + 1, 0, row)
            }
        }

        for (let i = 0; i < lines[0].length; i++) {
            columns.push(lines.map(l => {return l[i]}))
        }

        for (let i = columns.length - 1; i >= 0; i--) { // expand columns
            let cols = columns[i];
            if (!cols.includes("#")) {
                for (let line of lines) {
                    line.splice(i + 1, 0, ".")
                    columns.splice(i + 1, 0, cols)
                }
            }
        }

        for (let i = 0; i < lines.length; i++) {
            let row = lines[i];
            while (row.includes("#")) {
                let x = row.indexOf("#")
                galaxies.push([x, i])
                lines[i].splice(x, 1, "*")
                row.splice(x, 1, "*")
            }
        }

        for (let i = 0; i < galaxies.length; i++) {
            const galaxy = galaxies[i];
            for (let j = i + 1; j < galaxies.length; j++) {
                const nextGalaxy = galaxies[j];
                combos.push([galaxy, nextGalaxy])
            }
        }

        for (const combo of combos) {
            let G1 = combo[0]
            let G2 = combo[1]
            total += (Math.abs(G1[0] - G2[0]) + Math.abs(G1[1] - G2[1]))
        }

        final.innerHTML = total
    }
    
    button.addEventListener("click", refresh)
</script>
</html>